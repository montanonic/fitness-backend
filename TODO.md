Add testing to Friendships and FriendRequests.

Implement logging for the rest of the data entities that would make sense to
log information about.

Rewrite any hefty queries to use more efficient data types and potentially the
Conduit library as well.
